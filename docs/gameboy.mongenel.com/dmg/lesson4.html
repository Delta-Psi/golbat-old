<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>

<head>
<title>
DuoDreamer's Dreamscape
</title>
<meta name="title" content="DuoDreamer's Dreamscape">
<meta name="keywords" content="poetry,poems,midi,mod,mods,midis,gameboy,gb,pokemon,emulate,emulation,emulators,console,computer,mame,raiden,nesticle,rage,callus,nocash,zsnes,snes9x,arcade,classic,video games,roms">



<!-- -----------Start of CSS Definitions ------------------ -->
<link rel="stylesheet" type="text/css" href="../default.css">
<style type="text/css"><!--
--></style>
<!------------------------------- End of CSS Definitions ---------------------------->

</head>

<body>

<!-- Entire Document Starts Here -->
<div align="center">



<br>

<!---- Start of Whole Content Body. EG: all content tables will go inside this table --->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>




<!---- Main (right) column starts here ----------------------------------------------->
<td valign="top" width=620>

<!-- Start of Content Window #1 -->
<div>
<!-- Start of Table Header -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="bodybackground"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tablebody"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="bodybackground"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tablebody"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="tableshadow"></td>
</tr>
</table>
<!-- End of Table Header -->

<!-- Start of Table Body -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 class="tableborder">
<br>
</td>
<td width=8 class="tablebody">
<br>
</td>
<td width=600 class="tablebody" valign="top">

<!-- Window content goes here -->
<H2>ASMSchool  -  Lesson 4</H2>
In this lesson, you will learn a few more instructions and some methods for controlling program flow.<br>
<h3>Jump Around! Jump Around! Jump up, jump up and get down! ;-)</h3>
The simplest way to control how your program flows is by jump instructions. There are two versions, one being a far jump and one being a short jump. Both can be conditional based on the <i>Carry</i> or <i>Zero</i> Flags. Why is there a short jump when the regular jump instruction will jump anywhere? Well, take a look:<br><br>

Standard Jump<br>
<table bgcolor="#000000"><tr><td><PRE><FONT color="#00FF00">
JP (label)
JP (condition),(label)
</FONT></PRE></td></tr></table>


When we actually write code that we will assemble, we will be using labels to define sections and loop or jump points. So (label) will just happen to be whatever you named the loop or jump point. A label will be a string of characters, usually A-Z, 0-9, or underscore character, and will end with a "::". For example:<br><br>
<table bgcolor="#000000"><tr><td><PRE><FONT color="#00FF00">
Start_Game::
   LD A,$01
   
   more code here....
   more code here....
   
   JP Start_Game
</FONT></PRE></td></tr></table>

A new operand you will notice in the instruction is (condition). This is basically an operand that tells the CPU to perform the jump ONLY IF the condition is true. The conditions are states of the flags <i>Carry</i> and <i>Zero</i> in the F register. These flags are usually set by the previous instruction, although the state of a flag can stay the same if later instructions don't affect that particular flag. Tbe Conditions are:<br><br>
<tt><b>C, NC, Z, and NZ</b></tt><br><br>
Those stand for CARRY, NO CARRY, ZERO, and NOT ZERO. Say you have a variable "LIVES" and you want to make the program jump to some other code when "LIVES" is ZERO. Building on past lessons, here is an example:<br><br>



<table bgcolor="#000000"><tr><td><PRE><FONT color="#00FF00">
IS_LIVES_ZERO:
   LD HL, LIVES          ;<--(lives is a constant set to a 16-bit address)
   LD A, (HL)            ;<--(gets value at LIVES location)
   CP $00                ;<--(compares A to $00, if = then Z flag set)
   JP Z,Some_Other_Label ;<--(jumps to Some_Other_Label if Z flag is set)
   NOP                   ;<--(cpu would continue here if Z flag was 0)
</FONT></PRE></td></tr></table>
<br><br>
In the example, the code first loads the address of the variable into HL, which is set by compiler directives elsewhere, I'll explain that in a later lesson. Then the code loads the value at that address into register A. The next instruction Compares A with $00, by subtracting them, and setting the Z flag if A and the $00 operand were equal, or clearing the Z flag if they were not equal. Then finally, the jump instruction looks to see if Z is set and then jumps if it is. This little piece of code is a very simple IF...THEN statement.



<br>
<br>
<!-- Window content ends here -->


</td>

<td width=4 class="tablebody">
<br>
</td>
<td width=2 class="tableborder">
<br>
</td>
<td width=4 class="tableshadow">
<br>
</td>
</tr>
</table>
<!-- End of Table Body -->

<!-- Start of Table Footer -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 height=3 class="tableborder"></td>
<td width=2 height=3 class="tablebody"></td>
<td width=630 height=3 class="tablebody"></td>
<td width=2 height=3 class="tableborder"></td>
<td width=4 height=3 class="tableshadow"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=630 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="tableshadow"></td>
</tr>
<tr>
<td width=2 height=3 class="bodybackground"></td>
<td width=2 height=3 class="bodybackground"></td>
<td width=630 height=3 class="tableshadow"></td>
<td width=2 height=3 class="tableshadow"></td>
<td width=4 height=3 class="tableshadow"></td>
</tr>

</table>
<!-- End of Table Footer -->
</div>
<!-- End of Content Window #1 -->

<br>

<!-- Start of footnote window -->
<div>
<!-- Start of Table Header -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="bodybackground"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tablebody"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="bodybackground"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=612 height=2 class="tablebody"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="tableshadow"></td>
</tr>
</table>
<!-- End of Table Header -->

<!-- Start of Table Body -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 class="tableborder">
<br>
</td>
<td width=8 class="tablebody">
<br>
</td>
<td width=600 class="tablebody" valign="top">

<!-- Window content goes here -->

<!-- Stuff Goes here -->

<br>


</td>

<td width=4 class="tablebody">
<br>
</td>
<td width=2 class="tableborder">
<br>
</td>
<td width=4 class="tableshadow">
<br>
</td>
</tr>
</table>
<!-- End of Table Body -->

<!-- Start of Table Footer -->
<table border=0 cellpadding=0 cellspacing=0 width=620>
<tr>
<td width=2 height=3 class="tableborder"></td>
<td width=2 height=3 class="tablebody"></td>
<td width=630 height=3 class="tablebody"></td>
<td width=2 height=3 class="tableborder"></td>
<td width=4 height=3 class="tableshadow"></td>
</tr>
<tr>
<td width=2 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=630 height=2 class="tableborder"></td>
<td width=2 height=2 class="tableborder"></td>
<td width=4 height=2 class="tableshadow"></td>
</tr>
<tr>
<td width=2 height=3 class="bodybackground"></td>
<td width=2 height=3 class="bodybackground"></td>
<td width=630 height=3 class="tableshadow"></td>
<td width=2 height=3 class="tableshadow"></td>
<td width=4 height=3 class="tableshadow"></td>
</tr>

</table>
<!-- End of Table Footer -->
</div>
<!-- End of Footnote window ->

</td>
<!---- Main (right) column ends here ------------------------------------------------->

</tr>
</table>

</div>
</body>
</html>
